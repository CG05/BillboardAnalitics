{% extends 'template.html' %}

{% block title %}Track Rank Simulation{% endblock %}

{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/simulation/simulation.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}

<div id="wrapper">
    <div id="top-wrapper">
        <h1>Try our model !</h1>
    </div>
    <form method="post" action="/simulation/" name="rank_simulation"> {% csrf_token %}
        <div id="body-wrapper">
            <div id="slider-section">
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Date</div>
                        <div class="info">
                            <h1>발매 시기</h1>
                            <h2>2023년1월 ~ 2025년12월</h2>
                        </div>
                    </div>
                    {% comment %} <input type="range" id="date" name="date" min="3132" max="3288" step="1" value="{{date_input}}" class="slider"> {% endcomment %}
                    <input type="number" id="dateyear" name="dateyear" min="2023" max="2025" step="1" value="{{dateyear_input}}" class="input">년
                    <input type="number" id="datemonth" name="datemonth" min="1" max="12" step="1" value="{{datemonth_input}}" class="input">월

                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Danceability</div>
                        <div class="info">
                            <h1>곡의 댄스에 어울리는 수치</h1>
                            <h2>0 ~ 761</h2>
                        </div>
                    </div>
                    <input type="range" id="danceability" name="danceability" min="0" max="761" step="1" value="{{danceability_input}}" class="slider">
                    <input type="number" id="danceabilitynum" name="danceabilitynum" min="0" max="761" step="1" value="{{danceability_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Energy</div>
                        <div class="info">
                            <h1>곡의 에너지 수치</h1>
                            <h2>0 ~ 932</h2>
                        </div>
                    </div>
                    <input type="range" id="energy" name="energy" min="0" max="932" step="1" value="{{energy_input}}" class="slider">
                    <input type="number" id="energynum" name="energynum" min="0" max="932" step="1" value="{{energy_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Loudness</div>
                        <div class="info">
                            <h1>곡의 시끄러움 수치</h1>
                            <h2>0 ~ 6001</h2>
                        </div>
                    </div>
                    <input type="range" id="loudness" name="loudness" min="0" max="6001" step="1" value="{{loudness_input}}" class="slider">
                    <input type="number" id="loudnessnum" name="loudnessnum" min="0" max="6001" step="1" value="{{loudness_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Mode</div>
                        <div class="info">
                            <h1>0 : 마이너키(단조), 1 : 메이저키(장조)</h1>
                            <h2>0 ~ 1</h2>
                        </div>
                    </div>
                    <input type="range" id="mode" name="mode" min="0" max="1" step="1" value="{{mode_input}}" class="slider">
                    <input type="number" id="modenum" name="modenum" min="0" max="1" step="1" value="{{mode_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Speechiness</div>
                        <div class="info">
                            <h1>곡의 보컬이 아닌 목소리 포함 수치</h1>
                            <h2>0 ~ 1173</h2>
                        </div>
                    </div>
                    <input type="range" id="speechiness" name="speechiness" min="0" max="1173" step="1" value="{{speechiness_input}}" class="slider">
                    <input type="number" id="speechinessnum" name="speechinessnum" min="0" max="1173" step="1" value="{{speechiness_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Acousticness</div>
                        <div class="info">
                            <h1>곡의 어쿠스틱 수치</h1>
                            <h2>0 ~ 2416</h2>
                        </div>
                    </div>
                    <input type="range" id="acousticness" name="acousticness" min="0" max="2416" step="1" value="{{acousticness_input}}" class="slider">
                    <input type="number" id="acousticnessnum" name="acousticnessnum" min="0" max="2416" step="1" value="{{acousticness_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Instrumentalness</div>
                        <div class="info">
                            <h1>곡의 인스트루멘탈(보컬이 아닌 간주) 수치</h1>
                            <h2>0 ~ 3040</h2>
                        </div>
                    </div>
                    <input type="range" id="instrumentalness" name="instrumentalness" min="0" max="3040" step="1" value="{{instrumentalness_input}}" class="slider">
                    <input type="number" id="instrumentalnessnum" name="instrumentalnessnum" min="0" max="3040" step="1" value="{{instrumentalness_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Liveness</div>
                        <div class="info">
                            <h1>곡의 라이브 음원 수치</h1>
                            <h2>0 ~ 1420</h2>
                        </div>
                    </div>
                    <input type="range" id="liveness" name="liveness" min="0" max="1420" step="1" value="{{liveness_input}}" class="slider">
                    <input type="number" id="livenessnum" name="livenessnum" min="0" max="1420" step="1" value="{{liveness_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Valence</div>
                        <div class="info">
                            <h1>곡의 긍정적인 분위기 수치</h1>
                            <h2>0 ~ 1035</h2>
                        </div>
                    </div>
                    <input type="range" id="valence" name="valence" min="0" max="1035" step="1" value="{{valence_input}}" class="slider">
                    <input type="number" id="valencenum" name="valencenum" min="0" max="1035" step="1" value="{{valence_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Tempo</div>
                        <div class="info">
                            <h1>곡의 빠르기 수치</h1>
                            <h2>0 ~ 7916</h2>
                        </div>
                    </div>
                    <input type="range" id="tempo" name="tempo" min="0" max="7916" step="1" value="{{tempo_input}}" class="slider">
                    <input type="number" id="temponum" name="temponum" min="0" max="7916" step="1" value="{{tempo_input}}" class="input">
                </div>
            </div>
            <div id="result-section">
                <input id="rank-button" type="submit" value="SIMULATE">
                <div id="rank-label">Predicted<br>Rank </div>
                {% if rank != 0 and rank <= 10 %}
                    <div id="rank-num" class="text-center align-middle" style="color:deeppink">#{{rank}}</div>
                {% else %}
                    <div id="rank-num" class="text-center align-middle">#{{rank}}</div>
                {% endif %}
            </div>
        </div>
    </form>
</div>
<script>
    /* 슬라이더와 입력칸의 값을 동기화 */
    document.querySelectorAll('.slider-wrapper').forEach(wrapper => {
        const slider = wrapper.querySelector('.slider');
        const input = wrapper.querySelector('.input');

        slider.addEventListener('input', () => {
            input.value = slider.value;
        });

        input.addEventListener('input', () => {
            slider.value = input.value;
        });
    });
</script>



{% endblock %}