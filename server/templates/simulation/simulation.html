{% extends 'template.html' %}

{% block title %}Track Rank Simulation{% endblock %}

{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/simulation/simulation.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}

<div id="wrapper">
    <div id="top-wrapper">
        <h1 class="text-center" style = "font-family: 'Roboto', sans-serif; font-style: italic; margin-top:14px; font-weight:400;">Try our model ğŸ©·</h1>
    </div>
    <form method="post" action="/simulation/" name="rank_simulation"> {% csrf_token %}
        <div id="body-wrapper">

            <div id="slider-section">
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Date</div>
                        <div class="info">
                            <h1>ë°œë§¤ ì‹œê¸°</h1>
                            <h2>0 ~ 834</h2>
                        </div>
                    </div>
                    <input type="range" id="date" name="date" min="0" max="834" step="1" value="{{date_input}}" class="slider">
                    <input type="number" id="datenum" name="datenum" min="0" max="834" step="1" value="{{date_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Danceability</div>
                        <div class="info">
                            <h1>ê³¡ì˜ ëŒ„ìŠ¤ì— ì–´ìš¸ë¦¬ëŠ” ìˆ˜ì¹˜</h1>
                            <h2>0 ~ 761</h2>
                        </div>
                    </div>
                    <input type="range" id="danceability" name="danceability" min="0" max="761" step="1" value="{{danceability_input}}" class="slider">
                    <input type="number" id="danceabilitynum" name="danceabilitynum" min="0" max="761" step="1" value="{{danceability_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Energy</div>
                        <div class="info">
                            <h1>ê³¡ì˜ ì—ë„ˆì§€ ìˆ˜ì¹˜</h1>
                            <h2>0 ~ 932</h2>
                        </div>
                    </div>
                    <input type="range" id="energy" name="energy" min="0" max="932" step="1" value="{{energy_input}}" class="slider">
                    <input type="number" id="energynum" name="energynum" min="0" max="932" step="1" value="{{energy_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Loudness</div>
                        <div class="info">
                            <h1>ê³¡ì˜ ì‹œë„ëŸ¬ì›€ ìˆ˜ì¹˜</h1>
                            <h2>0 ~ 6001</h2>
                        </div>
                    </div>
                    <input type="range" id="loudness" name="loudness" min="0" max="6001" step="1" value="{{loudness_input}}" class="slider">
                    <input type="number" id="loudnessnum" name="loudnessnum" min="0" max="6001" step="1" value="{{loudness_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Mode</div>
                        <div class="info">
                            <h1>0 : ë§ˆì´ë„ˆí‚¤(ë‹¨ì¡°), 1 : ë©”ì´ì €í‚¤(ì¥ì¡°)</h1>
                            <h2>0 ~ 2</h2>
                        </div>
                    </div>
                    <input type="range" id="mode" name="mode" min="0" max="2" step="1" value="{{mode_input}}" class="slider">
                    <input type="number" id="modenum" name="modenum" min="0" max="2" step="1" value="{{mode_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Speechiness</div>
                        <div class="info">
                            <h1>ê³¡ì˜ ë³´ì»¬ì´ ì•„ë‹Œ ëª©ì†Œë¦¬ í¬í•¨ ìˆ˜ì¹˜</h1>
                            <h2>0 ~ 1173</h2>
                        </div>
                    </div>
                    <input type="range" id="speechiness" name="speechiness" min="0" max="1173" step="1" value="{{speechiness_input}}" class="slider">
                    <input type="number" id="speechinessnum" name="speechinessnum" min="0" max="1173" step="1" value="{{speechiness_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Acousticness</div>
                        <div class="info">
                            <h1>ê³¡ì˜ ì–´ì¿ ìŠ¤í‹± ìˆ˜ì¹˜</h1>
                            <h2>0 ~ 2416</h2>
                        </div>
                    </div>
                    <input type="range" id="acousticness" name="acousticness" min="0" max="2416" step="1" value="{{acousticness_input}}" class="slider">
                    <input type="number" id="acousticnessnum" name="acousticnessnum" min="0" max="2416" step="1" value="{{acousticness_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Instrumentalness</div>
                        <div class="info">
                            <h1>ê³¡ì˜ ì¸ìŠ¤íŠ¸ë£¨ë©˜íƒˆ(ë³´ì»¬ì´ ì•„ë‹Œ ê°„ì£¼) ìˆ˜ì¹˜</h1>
                            <h2>0 ~ 3040</h2>
                        </div>
                    </div>
                    <input type="range" id="instrumentalness" name="instrumentalness" min="0" max="3040" step="1" value="{{instrumentalness_input}}" class="slider">
                    <input type="number" id="instrumentalnessnum" name="instrumentalnessnum" min="0" max="3040" step="1" value="{{instrumentalness_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Liveness</div>
                        <div class="info">
                            <h1>ê³¡ì˜ ë¼ì´ë¸Œ ìŒì› ìˆ˜ì¹˜</h1>
                            <h2>0 ~ 1420</h2>
                        </div>
                    </div>
                    <input type="range" id="liveness" name="liveness" min="0" max="1420" step="1" value="{{liveness_input}}" class="slider">
                    <input type="number" id="livenessnum" name="livenessnum" min="0" max="1420" step="1" value="{{liveness_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Valence</div>
                        <div class="info">
                            <h1>ê³¡ì˜ ê¸ì •ì ì¸ ë¶„ìœ„ê¸° ìˆ˜ì¹˜</h1>
                            <h2>0 ~ 1035</h2>
                        </div>
                    </div>
                    <input type="range" id="valence" name="valence" min="0" max="1035" step="1" value="{{valence_input}}" class="slider">
                    <input type="number" id="valencenum" name="valencenum" min="0" max="1035" step="1" value="{{valence_input}}" class="input">
                </div>
                <div class="slider-wrapper">
                    <div class="label-wrapper">
                        <div class="label">Tempo</div>
                        <div class="info">
                            <h1>ê³¡ì˜ ë¹ ë¥´ê¸° ìˆ˜ì¹˜</h1>
                            <h2>0 ~ 3040</h2>
                        </div>
                    </div>
                    <input type="range" id="tempo" name="tempo" min="0" max="7916" step="1" value="{{tempo_input}}" class="slider">
                    <input type="number" id="temponum" name="temponum" min="0" max="7916" step="1" value="{{tempo_input}}" class="input">
                </div>
            </div>
            <div id="result-section">
                <input id="rank-button" type="submit" value="ë­í‚¹ ì˜ˆì¸¡">
                <div id="rank-label">Predicted<br>Rank </div>
                {% if rank != 0 and rank <= 10 %}
                    <div id="rank-num" class="text-center align-middle" style="color:deeppink">#{{rank}}</div>
                {% else %}
                    <div id="rank-num" class="text-center align-middle">#{{rank}}</div>
                {% endif %}
            </div>
        </div>
    </form>
</div>
<script>
    /* ìŠ¬ë¼ì´ë”ì™€ ì…ë ¥ì¹¸ì˜ ê°’ì„ ë™ê¸°í™” */
    document.querySelectorAll('.slider-wrapper').forEach(wrapper => {
        const slider = wrapper.querySelector('.slider');
        const input = wrapper.querySelector('.input');

        slider.addEventListener('input', () => {
            input.value = slider.value;
        });

        input.addEventListener('input', () => {
            slider.value = input.value;
        });
    });
</script>



{% endblock %}